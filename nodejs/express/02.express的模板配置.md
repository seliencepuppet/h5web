
模板引擎（Template Engine）是一个将页面模板和数据结合起来生成 html 的工具。上例中，我们只是返回纯文本给浏览器，现在我们修改代码返回一个 html 页面给浏览器。

<br/>

### ejs 前端模板

<br/>

模板引擎有很多，ejs 是其中一种，因为它使用起来十分简单，而且与 express 集成良好，所以我们使用 ejs。安装 ejs：

```javascript
[root@zhangyz express01]# npm i ejs --save
npm WARN express01@1.0.0 No description
npm WARN express01@1.0.0 No repository field.

+ ejs@2.6.1
added 1 package in 17.128s
```

修改 index.js 的代码如下:

#### index.js

```javascript
var path = require('path');
var express = require('express');
var app = express();
var indexRouter = require('./routes/index');
var userRouter = require('./routes/users');

app.set('views', path.join(__dirname, 'views')); // 设置存放模板文件的目录
app.set('view engine', 'ejs'); // 设置模板引擎为ejs

app.use('/', indexRouter);
app.use('/users', userRouter);

app.listen(30000);
```

#### routers/users.js

```javascript
var express = require('express');
var router = express.Router();

router.get('/:name', function(req, res){
    console.log(req.params.name);
    res.render('users',{
        name: req.params.name
    });
});

module.exports = router;
```

#### views/users.ejs

```ejs
<!DOCTYPE html>
<html>
    <head>
        <style type="text/css">
            body {
                padding: 50px;
                font: 14px "Lucida Grande", Helvetica, Arial, sans-serif;
            }
        </style>
    </head>

    <body>
        <h1><%= name.toUpperCase() %></h1>
        <p>hello, <%= name %></p>
    </body>
</html>
```
