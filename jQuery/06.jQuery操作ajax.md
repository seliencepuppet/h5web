
jQuery进行Ａjax 操作

jQuery 对 Ajax的操作进行了封装，jQuery进行Ajax 的操作主要有以下几个常用的方法：
load()方法， $.get() 方法，$.post() 方法，$.ajax() 方法，$.getScript() 和 $.getJson() 方法


Load() 方法

	•   load() 方法是最为简单和常用的 Ajax方法，能载入远程HTML代码并插入DOM中，语法如下：
语法：  load(url,  [data],  [callback])
	1, url：请求HTML页面的URL地址
	2，data：发送给服务器的 key/value数据
	３，callback： 请求完成时的回调函数，无论请求成功或失败



	<!DOCTYPE HTML>
	<html>
	<head>
	<title></title>        
	<script  type="text/javascript">
	$(function(){
			$("input:eq(0)").click(function(){
					$("#content").load("LoadServlet");
					});
			$("input:eq(1)").click(function(){
					$("#content").load( "LoadServlet", {'username':'chenhao', 'age': 34},  function(responseText, textStatus, XMLHttpRequest){
							alert(textStatus);
							alert(responseText);
							alert(XMLHttpRequest.status);
							alert(XMLHttpRequest.responseText);
							} );
					});
			});
</script>
</head>
<body>
<input type="button" value="loadGet" />
<input type="button" value="loadPost" />
<div  id="content"></div        
</body> 
</html>





LoadServlet.java

package com.iotek.jee.servlet;
import javax.servlet.http.HttpServlet;

public class ProcessingServlet  extends  HttpServlet {
	private static final long serialVersionUID = 1L;

	@Override
		protected  void  doGet(HttpServletRequest  req,  HttpServletResponse  resp)  
		throws  ServletException,  IOException {                   
			response.setContentType("text/html; charset=utf-8");
			response.setCharacterEncoding("utf-8");
			PrintWriter  out=response.getWriter();
			out.println("<ul id='myul'>");
			out.println("<li id='myli'>北京</li>");
			out.println("<li'>上海</li>");
			out.println("<li'>南京</li>");
			out.println("</ul>");
			out.close();
		}

	@Override
		protected void doPost(HttpServletRequest  req,  HttpServletRequest  resp)
		throws ServletException,  IOException {
			request.setCharacterEncoding("utf-8");
			String username = request.getParameter("username");
			int  age = Integer.parseInt(request.getParameter("age"));
			rsponse.setCharacterEncoding("utf-8");
			PrintWriter out=response.getWriter();
			out.println("<p>我的名字叫：" + username + "，今年：" + age + "岁</p>");
			out.close();                                
		}        
}


#### $.get() 方法的使用


首先看 $.get() 方法

通过远程 HTTP GET 请求载入信息。语法如下：

语法：$.get(url, [data],  [callback],  [type])
	1. url： 请求HTML页面的URL地址
	2. data： 发送给服务器的 key/value 的数据作为字符串附加到请求 URL中
	3, callback： 载入成功时回调函数
	4, type： 服务器返回内容的格式，包括 xml， html， script， json， text 等


	$.get()  方法的回调函数只有两个参数，代码如下：
	function(data, textStatus) {
		// data： 返回的内容，可以是xml 文件， json文件， html片段等。
		// textStatus： 请求状态： success，error， timeout等。        
	}



<!DOCTYPE HTML>
<html>
<head>
<title></title>        
<script  type="text/javascript">
$(function(){
		$("input:eq(2)").click(function(){
				$.get( "GetServlet",
						{
						'username':  encodeURI(encodeURI($("#username").val())),  
						'password':  encodeURI(encodeURI($("#password").val())),
						},  
						function(data, textStatus){
						$("#content").html(data);
						alert(textStatus);
						}, 
						"html"
					 );
				});
		});
</script>
</head>
<body>
<input type="button" value="loadGet" />
<input type="button" value="loadPost" />
<div  id="content"></div        
</body> 
</html>





LoadServlet.java

package com.iotek.jee.servlet;
import javax.servlet.http.HttpServlet;

public class ProcessingServlet  extends  HttpServlet {
	private static final long serialVersionUID = 1L;

	@Override
		protected  void  doGet(HttpServletRequest  request,  HttpServletResponse  response)  
		throws  ServletException,  IOException {                   
			response.setContentType("text/html; charset=utf-8");
			response.setCharacterEncoding("utf-8");
			PrintWriter  out=response.getWriter();
			String  username = URLDecoder.decode(URLDecoder.decode(request.getParameter("username"), "UTF-8"),  "UTF-8");
			String  password = URLDecoder.decode(URLDecoder.decode(request.getParameter("password"), "UTF-8"), "UTF-8");
			if (username.equals("chenhao")  && password.equals("chenhao")) {
				our.println("<p>欢迎" + username + "光临</p>");                
			} else {
				out.println("<p>用户名或密码出错</p>");                
			}
		}

	@Override
		protected void doPost(HttpServletRequest  req,  HttpServletRequest  resp)
		throws ServletException,  IOException {
			request.setCharacterEncoding("utf-8");
			String username = request.getParameter("username");
			int  age = Integer.parseInt(request.getParameter("age"));
			rsponse.setCharacterEncoding("utf-8");
			PrintWriter out=response.getWriter();
			out.println("<p>我的名字叫：" + username + "，今年：" + age + "岁</p>");
			out.close();                                
		}        
}







